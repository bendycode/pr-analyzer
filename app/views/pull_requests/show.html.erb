<h1><%= @pull_request.title %></h1>

<%= render 'details' %>

<h2>Reviews</h2>
<% @reviews.each do |review| %>
  <div class="review">
    <p>
      <strong>Author:</strong> <%= review.author&.name %>
      <strong>State:</strong> <%= review.state.titleize %>
      <strong>Submitted at:</strong> <%= review.submitted_at.strftime("%Y-%m-%d %H:%M") %>
    </p>
  </div>
<% end %>

<h2>Users</h2>
<%= link_to 'All Users', pull_request_pull_request_users_path(@pull_request) %>

<ul>
  <% @pull_request_users.each do |pull_request_user| %>
    <li><%= link_to pull_request_user.user.username, user_path(pull_request_user.user) %> (<%= pull_request_user.role %>)</li>
  <% end %>
</ul>

<%= paginate @pull_request_users %>
